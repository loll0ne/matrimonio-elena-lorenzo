<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#e7c1c5" />
  <title>Elena & Lorenzo — Matrimonio</title>
  <meta name="description" content="Tutte le informazioni sul matrimonio di Elena & Lorenzo: quando, dove e RSVP." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      /* Tavolozza — Rosa antico & Verde eucalipto */
      --rose-50:#fbf5f6;
      --rose-100:#f7e7e8;
      --rose-200:#f0d6d9;
      --rose-300:#e8c4c7;
      --rose-400:#dcaab0;
      --rose-500:#d09099;
      --rose-600:#c27c88;

      --euca-50:#edf4f2;
      --euca-200:#c9ded9;
      --euca-400:#9fbfb7;
      --euca-600:#6b9c91;
      --euca-700:#59887d;
      --euca-800:#3f6f64;

      --ink:#2a2a2a;
      --muted:#5c5c5c;
      --paper:#ffffff;

      --radius: 18px;
      --shadow: 0 10px 30px rgba(63,111,100,.16);

      --container: min(1100px, calc(100% - 2rem));

      /* Tipografia fluida */
      --font-display: "Playfair Display", serif;
      --font-body: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif;
      --fs-hero: clamp(2.2rem, 6vw, 4rem);
      --fs-h1: clamp(1.6rem, 4vw, 2.4rem);
      --fs-h2: clamp(1.2rem, 2.8vw, 1.5rem);
      --fs-body: clamp(1rem, 1.2vw, 1.05rem);
    }

    /* Background morbido */
    body{
      margin:0;
      color:var(--ink);
      font-family:var(--font-body);
      font-size:var(--fs-body);
      line-height:1.6;
      background:
        radial-gradient(1200px 800px at 80% -10%, rgba(107,156,145,.22), transparent 60%),
        radial-gradient(900px 600px at -10% 20%, rgba(224,192,196,.35), transparent 60%),
        linear-gradient(180deg, var(--rose-50), var(--euca-50));
      background-attachment: fixed;
      scroll-behavior:smooth;
      -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
    }

    /* Navbar glass */
    .nav{
      position: sticky; top:0; z-index: 50;
      backdrop-filter: saturate(180%) blur(14px);
      -webkit-backdrop-filter: saturate(180%) blur(14px);
      background: color-mix(in srgb, var(--paper) 70%, var(--rose-100));
      border-bottom:1px solid color-mix(in srgb, var(--rose-300) 55%, white);
    }
    .nav .wrap{
      max-width: var(--container); margin:auto; display:flex; align-items:center; justify-content:space-between;
      padding:.8rem 0;
    }
    .brand{ display:flex; align-items:center; gap:.7rem; font-weight:600; letter-spacing:.4px;}
    .brand-badge{
      width:38px; height:38px; border-radius:12px;
      background: conic-gradient(from 210deg, var(--rose-400), var(--euca-600));
      box-shadow: inset 0 0 0 2px #fff8, 0 6px 18px #00000012;
      display:grid; place-items:center; color:white; font-weight:700; font-size:.9rem;
    }
    .nav a{ color:var(--ink); text-decoration:none; }
    .menu{ display:flex; gap:1.2rem; }
    .menu a{ padding:.5rem .6rem; border-radius:10px; transition: .25s ease; font-weight:500; }
    .menu a:hover{ background:var(--rose-100); }

    /* Layout */
    section{ scroll-margin-top: 90px; }
    .hero{ padding: 7rem 0 5rem; }
    .wrap{ max-width: var(--container); margin:auto; padding: 0 0; }

    .card{
      background: linear-gradient(180deg, #fff, #fff8);
      border:1px solid color-mix(in srgb, var(--euca-200) 40%, #fff);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(1rem, 3vw, 2rem);
    }

    .hero h1{ font-family:var(--font-display); font-size:var(--fs-hero); margin:0 0 .6rem; line-height:1.1; }
    .hero p{ color:var(--muted); max-width: 65ch; }

    .badge{ display:inline-flex; align-items:center; gap:.5rem; padding:.45rem .7rem; border-radius:12px; font-size:.9rem; font-weight:600; letter-spacing:.25px; background: var(--euca-600); color:white; box-shadow: 0 8px 20px rgba(107,156,145,.25); }
    .badge small{ font-weight:500; opacity:.9; }

    .cta{ margin-top: 1.2rem; display:flex; gap:.8rem; flex-wrap:wrap; }
    .btn{ display:inline-flex; align-items:center; gap:.55rem; padding:.85rem 1rem; border-radius: 14px; border:1px solid transparent; font-weight:600; text-decoration:none; transition:.25s ease; }
    .btn-primary{ background: linear-gradient(180deg, var(--euca-600), var(--euca-700)); color:#fff; box-shadow: 0 10px 22px rgba(63,111,100,.25); }
    .btn-primary:hover{ transform: translateY(-1px); box-shadow: 0 16px 28px rgba(63,111,100,.28); }
    .btn-soft{ background: var(--rose-100); color: var(--ink); border-color: var(--rose-300); }
    .btn-soft:hover{ background: var(--rose-200); }

    .grid{ display:grid; gap:1rem; }
    @media (min-width: 900px){ .grid-2{ grid-template-columns:1.1fr .9fr; } }

    h2{ font-family: var(--font-display); font-weight:700; font-size: var(--fs-h1); margin:0 0 .7rem; }
    h3{ font-weight:700; font-size: var(--fs-h2); margin:0 0 .2rem; }
    .muted{ color:var(--muted); }

    .info-list{ display:grid; gap: .8rem; }
    .info-row{ display:flex; gap:.8rem; align-items:flex-start; padding:.8rem; border-radius:12px; background: #fff; border:1px solid var(--euca-200); }
    .icon{ width:22px; height:22px; display:inline-grid; place-items:center; border-radius:8px; background: var(--rose-200); color:#6f3e46; font-weight:700; font-size:.85rem; }

    .timeline{ position:relative; padding-left:1.4rem; }
    .timeline::before{ content:""; position:absolute; left:.55rem; top:.2rem; bottom:.2rem; width:2px; background: color-mix(in srgb, var(--euca-400) 60%, white); border-radius:2px; }
    .tl-item{ position:relative; padding:.35rem 0 .35rem 1rem; }
    .tl-item::before{ content:""; position:absolute; left:-.3rem; top:.65rem; width:10px; height:10px; background: var(--euca-600); border:2px solid #fff; border-radius:50%; box-shadow: 0 2px 0 #00000010; }

    /* Form RSVP */
    form{ display:grid; gap:.9rem; }
    label{ font-weight:600; }
    .row{ display:grid; gap:.9rem; }
    @media (min-width:700px){ .row{ grid-template-columns:1fr 1fr; } }
    input, select, textarea{
      appearance:none; width:100%; padding:.9rem 1rem; border-radius:12px; border:1px solid var(--euca-200); background:#fff; font: inherit; color:var(--ink);
      transition: border-color .2s ease, box-shadow .2s ease;
    }
    textarea{ min-height:120px; }
    input:focus, select:focus, textarea:focus{ outline:none; border-color: var(--euca-600); box-shadow: 0 0 0 4px color-mix(in srgb, var(--euca-600) 18%, transparent); }
    .hp{ position:absolute; left:-9999px; opacity:0; }

    .notice{ font-size:.95rem; color:var(--muted); }

    /* FAQ */
    details{ background:#fff; border:1px solid var(--euca-200); border-radius:12px; padding:1rem 1.2rem; }
    details + details{ margin-top:.6rem; }
    summary{ cursor:pointer; font-weight:700; }

    /* Footer */
    footer{ padding:2rem 0 3rem; color:#30433f; }
    .foot{ display:flex; align-items:center; justify-content:space-between; gap:1rem; flex-wrap:wrap; }

    /* Motion ridotta */
    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; }
    }

    /* ===== POPUP COUNTDOWN + FIREWORKS ===== */
    .modal-overlay{
      position: fixed; inset: 0; background:#0b1a1733; backdrop-filter: blur(6px);
      display:grid; place-items:center; z-index: 1000; padding: 1rem;
      animation: overlayIn .25s ease both;
    }
    @keyframes overlayIn{ from{opacity:0} to{opacity:1} }
    .modal{
      width:min(680px, 100%); border-radius: var(--radius);
      background:#fff; border:1px solid var(--euca-200);
      box-shadow: 0 20px 60px rgba(63,111,100,.25);
      position: relative; overflow:hidden;
    }
    .modal-header{
      padding:1rem 1.2rem; background: linear-gradient(180deg,var(--rose-100),#fff);
      border-bottom:1px solid var(--euca-200); display:flex; align-items:center; justify-content:space-between;
    }
    .modal-title{ font-family:var(--font-display); font-weight:700; font-size: clamp(1.2rem,2.5vw,1.6rem); }
    .modal-close{
      appearance:none; border:0; background:transparent; font-size:1.6rem; line-height:1; cursor:pointer;
      color:var(--euca-800); border-radius:10px; padding:.2rem .4rem;
    }
    .modal-close:hover{ background:var(--rose-100); }
    .modal-body{ padding:1.2rem; }

    .countdown{
      display:flex; gap:.6rem; justify-content:center; flex-wrap:wrap; margin-top:.6rem;
    }
    .count{
      min-width:84px; text-align:center; padding:.8rem .6rem; border-radius:14px;
      background: #fff; border:1px solid var(--euca-200); box-shadow: var(--shadow);
    }
    .count strong{ font-size:clamp(1.4rem,4vw,2rem); display:block; line-height:1.1; }
    .count span{ font-size:.9rem; color:var(--muted); }

    /* Canvas fuochi d'artificio */
    .fireworks-canvas{
      position:absolute; inset:0; width:100%; height:100%; pointer-events:none; display:none;
    }
    .modal--fireworks .fireworks-canvas{ display:block; }

  /* --- Mobile polish --- */
    @media (max-width: 480px){
      .hero{ padding: 4.5rem 0 3rem; }
      .card{ padding: 1rem; }
      .menu a{ padding:.4rem .5rem; }
      .info-row{ padding:.7rem; }
    
      /* sfondo: su iOS/Android evita scatti di scroll */
      body{ background-attachment: scroll; }
    
      /* Countdown più compatto */
      .countdown{ gap:.5rem; }
      .count{
        min-width:64px; /* prima 84px */
        padding:.6rem .5rem;
        border-radius:12px;
      }
      .count strong{ font-size:1.25rem; }
      .count span{ font-size:.8rem; }
    
      /* Popup più elastico */
      .modal{
        width: 94vw;        /* prima min(680px, 100%) */
        border-radius:14px; /* un filo meno per schermi piccoli */
      }
      .modal-header{ padding:.8rem 1rem; }
      .modal-title{ font-size:1.2rem; }
      .modal-body{ padding: .9rem; }
      .modal-close{ font-size:1.4rem; }
    }
    
    /* Evita overflow orizzontale in generale */
    html, body{ overflow-x:hidden; -webkit-text-size-adjust:100%; }

    /* ---- NAV mobile hamburger ---- */
.nav-toggle{ display:none; align-items:center; justify-content:center;
  width:40px; height:40px; border:1px solid color-mix(in srgb, var(--euca-200) 60%, white);
  border-radius:10px; background:#fff; cursor:pointer; font-size:1.2rem; }
.nav-toggle:active{ transform: scale(.98); }

@media (max-width: 860px){
  .nav .wrap{ position: relative; }
  .menu{ 
    position: absolute; top:100%; left:0; right:0;
    background: color-mix(in srgb, var(--paper) 92%, var(--rose-100));
    border-bottom:1px solid var(--euca-200);
    display: grid; gap:0; padding:.4rem 1rem;
    transform: translateY(-8px); opacity:0; pointer-events:none;
    transition: .2s ease;
  }
  .menu a{ padding:.9rem 0; border-radius:10px; }
  .menu a:hover{ background: var(--rose-100); }
  .menu.open{ transform:none; opacity:1; pointer-events:auto; }

  .nav-toggle{ display:inline-flex; }
  /* compatta un po' il brand così tutto sta in una riga */
  .brand{ gap:.5rem; }
}

/* Evita che le parole vadano a capo nella navbar desktop */
@media (min-width: 861px){
  .menu a{ white-space: nowrap; }
}

  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="nav" aria-label="Principale">
  <div class="wrap">
    <a class="brand" href="#home">
      <span class="brand-badge" aria-hidden="true">E❤L</span>
      <span>Elena &amp; Lorenzo</span>
    </a>

    <!-- Bottone hamburger -->
    <button class="nav-toggle" aria-expanded="false" aria-controls="navMenu" aria-label="Apri menu">☰</button>

    <div class="menu" id="navMenu" role="menubar">
      <a role="menuitem" href="#quando-dove">Quando &amp; Dove</a>
      <a role="menuitem" href="#programma">Programma</a>
      <a role="menuitem" href="#rsvp">RSVP</a>
      <a role="menuitem" href="#faq">FAQ</a>
      <a role="menuitem" href="partecipazione.html">Partecipazione</a>
    </div>
  </div>
</nav>


  <!-- HERO -->
  <header id="home" class="hero">
    <div class="wrap grid grid-2">
      <div class="card">
        <span class="badge" aria-label="Invito al matrimonio">
          <span>Il nostro giorno</span> <small>— siete invitati!</small>
        </span>
        <h1>Elena &amp; Lorenzo</h1>
        <p>
          Ci sposiamo e non vediamo l'ora di festeggiare con voi! Qui trovate tutte le informazioni utili su <strong>quando</strong>, <strong>dove</strong> e come confermare la vostra presenza.
        </p>
        <div class="cta">
          <a class="btn btn-primary" href="#rsvp">Conferma presenza (RSVP)</a>
          <a class="btn btn-soft" href="#quando-dove">Dettagli dell'evento</a>
        </div>
      </div>
      <div class="card" aria-label="Dettagli sintetici">
        <h3>Dettagli in breve</h3>
        <div class="info-list" role="list">
          <div class="info-row" role="listitem">
            <div class="icon" aria-hidden="true">📅</div>
            <div>
              <div><strong>Data:</strong> <time datetime="2026-05-31">Domenica 31 Maggio 2026</time></div>
              <div class="muted">Cerimonia ore 11:15 · Ricevimento a seguire</div>
            </div>
          </div>
          <div class="info-row" role="listitem">
            <div class="icon" aria-hidden="true">📍</div>
            <div>
              <div><strong>Luogo:</strong> Villa I Tramonti</div>
              <div class="muted">Via Pulzona, 3392, 47835 Saludecio RN</div>
            </div>
          </div>
          <div class="info-row" role="listitem">
            <div class="icon" aria-hidden="true">🎉</div>
            <div>
              <div><strong>Dress code:</strong> Elegante ma comodo</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- QUANDO & DOVE -->
  <section id="quando-dove" class="wrap" aria-labelledby="when-where-title">
    <div class="grid grid-2">
      <div class="card">
        <h2 id="when-where-title">Quando &amp; Dove</h2>
        <p class="muted">Tutti i dettagli logistici per arrivare puntuali e rilassati.</p>
        <div class="info-list" style="margin-top:.6rem">
          <div class="info-row">
            <div class="icon" aria-hidden="true">⛪</div>
            <div>
              <div><strong>Cerimonia</strong> — Chiesa di San Clemente RN</div>
              <div class="muted">Piazza Giuseppe Mazzini, 1, 47832 San Clemente RN · Ore: 11:15</div>
            </div>
          </div>
          <div class="info-row">
            <div class="icon" aria-hidden="true">🍽️</div>
            <div>
              <div><strong>Ricevimento</strong> — Villa I Tramonti</div>
              <div class="muted">Via Pulzona, 3392, 47835 Saludecio RN · A 18 min dalla cerimonia</div>
            </div>
          </div>
          <div class="info-row">
            <div class="icon" aria-hidden="true">🅿️</div>
            <div>
              <div><strong>Parcheggio</strong> — Disponibile in loco</div>
              <div class="muted">Seguite la segnaletica “Matrimonio E ❤ L”.</div>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Programma della giornata</h3>
        <div class="timeline" aria-label="Scaletta oraria">
          <div class="tl-item"><strong>11:15</strong> · Inizio cerimonia</div>
          <div class="tl-item"><strong>12:15</strong> · Lancio del riso &amp; saluti</div>
          <div class="tl-item"><strong>12:50</strong> · Welcome Drink</div>
          <div class="tl-item"><strong>13:30</strong> · Aperitivo in giardino</div>
          <div class="tl-item"><strong>14:00</strong> · Pranzo</div>
          <div class="tl-item"><strong>18:00</strong> · Torta &amp; brindisi</div>
          <div class="tl-item"><strong>19:00</strong> · Festa!</div>
        </div>
        <p class="notice">Gli orari sono indicativi e potrebbero slittare di qualche minuto — l'importante è esserci! 💕</p>
      </div>
    </div>
  </section>

  <!-- COME ARRIVARE DA BOLOGNA -->
  <section id="come-arrivare" class="wrap" aria-labelledby="arrivo-title" style="margin-top:1rem">
    <div class="card">
      <h2 id="arrivo-title">Come arrivare da Bologna</h2>
      <p class="muted">Indicazioni utili per parenti e amici che partono da Bologna 🚗🚆</p>

      <div class="info-list" style="margin-top:.6rem">
        <div class="info-row">
          <div class="icon">🚗</div>
          <div>
            <div><strong>In auto verso la Chiesa</strong></div>
            <div class="muted">Prendere l’A14 direzione Rimini/Ancona · Uscita Cattolica/San Giovanni/Gabicce · proseguire verso San Clemente (circa 1h 20min).</div>
            <a class="btn btn-soft" style="margin-top:.4rem" target="_blank"
               href="https://www.google.com/maps/dir/Bologna,+BO/Chiesa+di+San+Clemente,+Piazza+Giuseppe+Mazzini,+1,+47832+San+Clemente+RN">
              Apri su Google Maps
            </a>
          </div>
        </div>

        <div class="info-row">
          <div class="icon">🍽️</div>
          <div>
            <div><strong>Dalla chiesa al ristorante</strong></div>
            <div class="muted">Villa I Tramonti si trova a circa 18 minuti di auto dalla Chiesa.</div>
            <a class="btn btn-soft" style="margin-top:.4rem" target="_blank"
               href="https://www.google.com/maps/dir/Chiesa+di+San+Clemente,+San+Clemente+RN/Villa+I+Tramonti,+Via+Pulzona,+3392,+47835+Saludecio+RN">
              Apri su Google Maps
            </a>
          </div>
        </div>

        <div class="info-row">
          <div class="icon">🚆</div>
          <div>
            <div><strong>In treno</strong></div>
            <div class="muted">Stazione consigliata: Rimini (circa 1h da Bologna Centrale). Da lì 25 minuti in auto/taxi per San Clemente.</div>
            <a class="btn btn-soft" style="margin-top:.4rem" target="_blank"
               href="https://www.google.com/maps/place/Stazione+Rimini/">
              Stazione Rimini
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- RSVP -->
  <section id="rsvp" class="wrap" aria-labelledby="rsvp-title" style="margin-top:1rem">
    <div class="card">
      <h2 id="rsvp-title">Conferma presenza (RSVP)</h2>
      <p class="muted">Vi chiediamo di confermare entro il <strong>30 aprile 2026</strong>. Grazie di cuore! 🫶</p>

      <form action="https://formspree.io/f/mnnzypoj" method="POST">
        <input class="hp" type="text" name="company" tabindex="-1" autocomplete="off" />
        <div class="row">
          <div>
            <label for="nome">Nome e cognome*</label>
            <input id="nome" name="nome" type="text" required placeholder="Mario Rossi" />
          </div>
          <div>
            <label for="email">Email*</label>
            <input id="email" name="email" type="email" required placeholder="mario@email.com" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="telefono">Telefono</label>
            <input id="telefono" name="telefono" type="tel" placeholder="+39 3XX XXX XXXX" />
          </div>
          <div>
            <label for="presenza">Parteciperai?*</label>
            <select id="presenza" name="presenza" required>
              <option value="" disabled selected>Seleziona…</option>
              <option>Con gioia, ci sarò</option>
              <option>Mi dispiace, non posso</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="ospiti">Numero di persone (incluso te)*</label>
            <select id="ospiti" name="ospiti" required>
              <option value="" disabled selected>Seleziona…</option>
              <option>1</option><option>2</option><option>3</option><option>4</option><option>5+</option>
            </select>
          </div>
          <div>
            <label for="menu">Preferenze alimentari</label>
            <select id="menu" name="preferenze_alimentari">
              <option>Nessuna</option>
              <option>Vegetariano</option>
              <option>Vegano</option>
              <option>Intolleranza al glutine</option>
              <option>Allergie (specifica sotto)</option>
            </select>
          </div>
        </div>
        <div>
          <label for="note">Note o allergie</label>
          <textarea id="note" name="note" placeholder="Es. no latticini; arrivo più tardi; richiesta seggiolone…"></textarea>
        </div>
        <div>
          <label style="display:flex; gap:.6rem; align-items:flex-start">
            <input type="checkbox" name="privacy" required style="margin-top:.35rem" />
            <span>Ho letto e accetto l'uso dei dati ai soli fini organizzativi dell'evento.</span>
          </label>
        </div>

        <div class="cta">
          <button class="btn btn-primary" type="submit">Invia conferma</button>
          <a class="btn btn-soft" href="#home">Torna su</a>
        </div>
        <p class="notice">I dati saranno utilizzati esclusivamente per la gestione degli inviti.</p>
      </form>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="wrap" aria-labelledby="faq-title" style="margin-top:1rem">
    <div class="card">
      <h2 id="faq-title">Domande frequenti</h2>
      <details>
        <summary>Posso portare bambini?</summary>
        <p class="muted">Certo! Indicalo nel modulo RSVP così prepariamo i posti e, se serve, seggioloni.</p>
      </details>
      <details>
        <summary>Ci sono opzioni senza glutine / vegane?</summary>
        <p class="muted">Sì, il ristorante offre menù dedicati. Segnalalo nelle preferenze alimentari.</p>
      </details>
      <details>
        <summary>È prevista una lista nozze?</summary>
        <p class="muted">La vostra presenza è il regalo più grande 💕
        Se però desiderate fare un pensiero, trovate i dettagli nella sezione <a href="#regali">Un pensiero</a>.</p>
      </details>
    </div>
  </section>

  <!-- REGALI / IBAN -->
  <section id="regali" class="wrap" aria-labelledby="regali-title" style="margin-top:1rem">
    <div class="card">
      <h2 id="regali-title">Un pensiero</h2>
      <p class="muted">
        La vostra presenza è tutto ciò che desideriamo 💕<br>
        Chi volesse, può lasciare un pensiero al seguente IBAN:
      </p>
      <div class="info-row" style="margin-top:.8rem">
        <div class="icon">🏦</div>
        <div>
          <div><strong>IBAN:</strong> IT39K0623067930000030621688 </div>
          <div class="muted">Intestato a: Elena Angelini &amp; Lorenzo Verardi</div>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="wrap">
    <div class="foot">
      <div>
        <strong>Elena &amp; Lorenzo</strong><br>
        <span class="muted">Con amore, vi aspettiamo 💚💗</span>
      </div>
      <div class="muted">© 2026 — Con amore, Elena &amp; Lorenzo</div>
    </div>
  </footer>

  <!-- ===== POPUP COUNTDOWN (dentro il body) ===== -->
  <div class="modal-overlay" id="countdownOverlay" role="dialog" aria-modal="true" aria-labelledby="countdownTitle">
    <div class="modal" id="countdownModal">
      <canvas class="fireworks-canvas" id="fwCanvas"></canvas>
      <div class="modal-header">
        <h2 class="modal-title">Ci vediamo presto! ✨</h2>
        <p class="muted" style="margin:0 0 .6rem;">
          Manca sempre meno al nostro matrimonio 💕 <br>
          <strong>Elena &amp; Lorenzo</strong>
        </p>
        <button class="modal-close" id="countdownClose" aria-label="Chiudi popup">×</button>
      </div>
      <div class="modal-body">
        <p class="muted" style="text-align:center;max-width:52ch;margin:0 auto .6rem;">
          Mancano solo…
        </p>
        <div class="countdown" aria-live="polite">
          <div class="count"><strong id="dd">00</strong><span>giorni</span></div>
          <div class="count"><strong id="hh">00</strong><span>ore</span></div>
          <div class="count"><strong id="mm">00</strong><span>minuti</span></div>
          <div class="count"><strong id="ss">00</strong><span>secondi</span></div>
        </div>
        <p class="notice" style="text-align:center;margin-top:.9rem;">
          Domenica <strong>31 Maggio 2026</strong> · ore <strong>11:15</strong>
        </p>
      </div>
    </div>
  </div>

  <!-- JS POPUP + FIREWORKS -->
    <script>
  (function(){
    // ⏱️ Imposta la data/ora dell'evento (Roma)
    const targetIso = document.documentElement.dataset.countdownTarget
      || "2026-05-31T11:15:00+02:00";
    const target = new Date(targetIso);
  
    const overlay = document.getElementById('countdownOverlay');
    const modal   = document.getElementById('countdownModal');
    const btnClose= document.getElementById('countdownClose');
  
    const dd = document.getElementById('dd');
    const hh = document.getElementById('hh');
    const mm = document.getElementById('mm');
    const ss = document.getElementById('ss');
  
    // Chiudi popup (X, overlay, ESC)
    function closePopup(){
      overlay?.parentNode && overlay.parentNode.removeChild(overlay);
      document.body.style.overflow = "";
    }
    btnClose.addEventListener('click', closePopup);
    overlay.addEventListener('click', (e) => { if(e.target === overlay) closePopup(); });
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closePopup(); });
  
    // Se l'evento è già passato, non mostrare il popup
    if (Date.now() >= target.getTime()) {
      closePopup();
      return;
    }
  
    document.body.style.overflow = "hidden"; // evita scroll sotto al popup
  
    // Countdown
    let fireworksStarted = false;
    function tick(){
      const now  = new Date();
      const diff = target - now;
      if (diff <= 0){
        dd.textContent = "00"; hh.textContent = "00"; mm.textContent = "00"; ss.textContent = "00";
        if (!fireworksStarted){ fireworksStarted = true; startFireworks(); }
        return;
      }
      const s = Math.floor(diff/1000);
      const d = Math.floor(s/86400);
      const h = Math.floor((s%86400)/3600);
      const m = Math.floor((s%3600)/60);
      const sec = s%60;
      dd.textContent = String(d).padStart(2,'0');
      hh.textContent = String(h).padStart(2,'0');
      mm.textContent = String(m).padStart(2,'0');
      ss.textContent = String(sec).padStart(2,'0');
    }
    tick();
    const interval = setInterval(tick, 1000);
  
    // 🎆 Fireworks
    const canvas = document.getElementById('fwCanvas');
    const ctx = canvas.getContext('2d');
    let w, h, raf, bursts = [];
  
    function resize(){
      // usa devicePixelRatio per nitidezza su retina
      const ratio = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      const rect = modal.getBoundingClientRect();
      canvas.style.width  = rect.width + "px";
      canvas.style.height = rect.height + "px";
      canvas.width  = Math.floor(rect.width  * ratio);
      canvas.height = Math.floor(rect.height * ratio);
      w = canvas.width; h = canvas.height;
      ctx.setTransform(ratio,0,0,ratio,0,0);
    }
    window.addEventListener('resize', resize);
    window.addEventListener('orientationchange', ()=>{ setTimeout(resize, 250); });

  
    function random(min, max){ return Math.random()*(max-min)+min; }
  
    function createBurst(){
      const x = random(w*0.15, w*0.85);
      const y = random(h*0.25, h*0.55);
      const n = Math.floor(random(24, 42));
      const particles = [];
      for (let i=0;i<n;i++){
        const angle = (Math.PI*2) * (i/n);
        const speed = random(1.2, 3.2); // ✅ corretto
        particles.push({
          x, y,
          vx: Math.cos(angle)*speed,
          vy: Math.sin(angle)*speed,
          life: random(40, 70),
          age: 0
        });
      }
      bursts.push(particles);
    }
  
    function draw(){
      ctx.fillStyle = 'rgba(255,255,255,0.2)'; // scia
      ctx.fillRect(0,0,w,h);
  
      const grd = ctx.createLinearGradient(0,0,w,h);
      grd.addColorStop(0,'rgba(216,170,176,0.25)'); // rosa antico
      grd.addColorStop(1,'rgba(107,156,145,0.25)'); // eucalipto
      ctx.fillStyle = grd;
      ctx.fillRect(0,0,w,h);
  
      for (let i=bursts.length-1;i>=0;i--){
        const particles = bursts[i];
        for (let p of particles){
          p.age++;
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.02;
          const alpha = Math.max(0, 1 - p.age/p.life);
          ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI*2);
          ctx.fillStyle = `rgba(63,111,100,${alpha})`; ctx.fill();
          ctx.beginPath(); ctx.arc(p.x, p.y, 1, 0, Math.PI*2);
          ctx.fillStyle = `rgba(210,144,153,${alpha})`; ctx.fill();
        }
        if (particles.every(p => p.age >= p.life)) bursts.splice(i,1);
      }
  
      if (Math.random() < 0.06) createBurst();
      raf = requestAnimationFrame(draw);
    }
  
    function startFireworks(){
      clearInterval(interval);
      resize();
      modal.classList.add('modal--fireworks');
      canvas.style.display = 'block';
      document.getElementById('countdownTitle').textContent = "Ci siamo! 🎉";
      if (!raf) raf = requestAnimationFrame(draw);
      // Auto-chiudi dopo 18s
      setTimeout(()=>{
        cancelAnimationFrame(raf); raf = null;
        closePopup();
      }, 18000);
    }
  })();
  </script>

  <script>
  // Toggle hamburger
  (function(){
    const btn  = document.querySelector('.nav-toggle');
    const menu = document.getElementById('navMenu');
    if(!btn || !menu) return;

    function toggle(){
      const open = menu.classList.toggle('open');
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
      // chiudi se clicchi fuori
      if(open){
        document.addEventListener('click', onDoc, { once:true });
      }
    }
    function onDoc(e){
      if (!menu.contains(e.target) && e.target !== btn) {
        menu.classList.remove('open');
        btn.setAttribute('aria-expanded','false');
      }
    }
    btn.addEventListener('click', (e)=>{ e.stopPropagation(); toggle(); });
    // chiudi quando clicchi un link
    menu.querySelectorAll('a').forEach(a=>{
      a.addEventListener('click', ()=>{
        menu.classList.remove('open');
        btn.setAttribute('aria-expanded','false');
      });
    });
  })();
</script>

</body>
</html>
